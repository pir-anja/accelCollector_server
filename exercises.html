<!DOCTYPE html>
<html>

<head>
  <title id="title">Video Exercise Nr. 1</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      background-color: white;
      color: white;
      text-align: center;
    }
  </style>
</head>

<body>

  <!-- new to HTML5: video 
    <iframe width=98% height=600 src="https://youtube.com/embed/KPG1tJW8dwQ">
    </iframe>-->

  <video id="vid" width=78% src="file:///C:/Users/anja/Documents/SS21/BA/VideoInstructions/StudyClips/Normal/exercise1.mp4"
    type='video/mp4' onended="stopDataRecording()" />
  </video>

  <script src="/socket.io/socket.io.js"></script>
  <script>
    var socket = io();
    var video = document.getElementById('vid');
    var jumpTime;
    var root_dir = "file:///C:/Users/anja/Documents/SS21/BA/VideoInstructions/StudyClips/";

    socket.on('start ex!', (msg) => {
      //alert('hi');
      var arr = msg.split(',');
      var exercise = arr[0];
      var pace = arr[1];
      //alert('ex' + exercise + '-' + pace);
      video.src = root_dir + '/' + pace + '/exercise' + exercise + '.mp4';
      document.title = "Exercise Nr. " + exercise + ' - ' + pace;
     
      /*
      switch (exercise) {
        case 1:
          video.src = "file:///C:/Users/anja/Documents/SS21/BA/VideoInstructions/StudyClips/exercise1.mp4";
          jumpTime = 11060;
          document.title = "Exercise Nr. 1 " + pace;
          break;
        case 2:
          video.src = "file:///C:/Users/anja/Documents/SS21/BA/VideoInstructions/StudyClips/exercise2.mp4";
          jumpTime = 10110;
          document.title = "Exercise Nr. 2 " + pace;
          break;
        case 3:
          video.src = "file:///C:/Users/anja/Documents/SS21/BA/VideoInstructions/StudyClips/exercise3.mp4";
          jumpTime = 11040;
          document.title = "Exercise Nr. 3 " + pace;
          break;
        case 4:
          video.src = "file:///C:/Users/anja/Documents/SS21/BA/VideoInstructions/StudyClips/exercise4.mp4";
          jumpTime = 10010;
          document.title = "Exercise Nr. 4 " + pace;
          break;
        case 5:
          video.src = "file:///C:/Users/anja/Documents/SS21/BA/VideoInstructions/StudyClips/exercise5.mp4";
          jumpTime = 10020;
          document.title = "Exercise Nr. 5 " + pace;
          break;
        case 6:
          video.src = "file:///C:/Users/anja/Documents/SS21/BA/VideoInstructions/StudyClips/exercise6.mp4";
          jumpTime = 10110;
          document.title = "Exercise Nr. 6 " + pace;
          break;
        case 7:
          video.src = "file:///C:/Users/anja/Documents/SS21/BA/VideoInstructions/StudyClips/exercise7.mp4";
          jumpTime = 10140;
          document.title = "Exercise Nr. 7 " + pace;
          break;
        case 8:
          video.src = "file:///C:/Users/anja/Documents/SS21/BA/VideoInstructions/StudyClips/exercise8.mp4";
          jumpTime = 10080;
          document.title = "Exercise Nr. 8 " + pace;
          break;
        case 9:
          video.src = "file:///C:/Users/anja/Documents/SS21/BA/VideoInstructions/StudyClips/exercise9.mp4";
          jumpTime = 10210;
          document.title = "Exercise Nr. 9 " + pace;
          break;
        case 10:
          video.src = "file:///C:/Users/anja/Documents/SS21/BA/VideoInstructions/StudyClips/exercise10.mp4";
          jumpTime = 10050;
          document.title = "Exercise Nr. 10 " + pace;
          break;
      }*/
      
      video.play();
      
      const timestamp = Date.now();
      socket.emit('started vid', timestamp);
      //socket.emit('jump', timestamp + jumpTime);
      //video.onended(exercise);
      /*setTimeout(
        function() {
          const timestamp = Date.now();
          socket.emit('jump', timestamp);
      }, 10110);*/
      /*video.onended = function(e) {
        alert('stop vid' + e);
      }*/
      //video.addEventListener('ended', stopDataRecording(exercise), false);
    });


    function stopDataRecording(e) {
      //alert('stop vid');
      socket.emit('stop vid');
    }
  </script>

</body>

</html>